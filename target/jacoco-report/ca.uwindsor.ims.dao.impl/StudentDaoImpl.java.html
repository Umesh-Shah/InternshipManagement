<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>StudentDaoImpl.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Internship Management System</a> &gt; <a href="index.source.html" class="el_package">ca.uwindsor.ims.dao.impl</a> &gt; <span class="el_source">StudentDaoImpl.java</span></div><h1>StudentDaoImpl.java</h1><pre class="source lang-java linenums">package ca.uwindsor.ims.dao.impl;

import java.io.Serializable;
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.List;

import org.apache.logging.log4j.LogManager;
import org.apache.logging.log4j.Logger;
import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.Transaction;
import org.hibernate.query.Query;
import org.hibernate.transform.Transformers;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;
import org.springframework.stereotype.Repository;
import org.springframework.transaction.annotation.Transactional;

import jakarta.persistence.EntityManager;
import jakarta.persistence.NoResultException;
import jakarta.persistence.PersistenceContext;
import jakarta.persistence.TypedQuery;

import ca.uwindsor.ims.model.ApprovalStudentBo;
import ca.uwindsor.ims.model.StudentLoginBo;
import ca.uwindsor.ims.model.ReportBo;
import ca.uwindsor.ims.model.StudentCertificateBo;
import ca.uwindsor.ims.model.StudentEducationBo;
import ca.uwindsor.ims.model.StudentGpaBo;
import ca.uwindsor.ims.model.StudentInfoBo;
import ca.uwindsor.ims.model.StudentInternshipBo;
import ca.uwindsor.ims.model.StudentWorkBo;
import ca.uwindsor.ims.exception.DatabaseException;

@Component
@Repository
@Transactional
<span class="fc" id="L39">public class StudentDaoImpl implements StudentDao {</span>
	
<span class="fc" id="L41">	private static final Logger log = LogManager.getLogger(StudentDaoImpl.class);</span>
	
	@Autowired
	private SessionFactory sessionFactory;
	
	@PersistenceContext
	private EntityManager entityManager;
	
<span class="fc" id="L49">	DateFormat dateandtime = new SimpleDateFormat(&quot;dd/MM/yyyy HH:mm:ss&quot;);</span>

	public SessionFactory getSessionFactory() {
<span class="nc" id="L52">		return sessionFactory;</span>
	}

	public void setSessionFactory(SessionFactory sessionFactory) {
<span class="nc" id="L56">		this.sessionFactory = sessionFactory;</span>
<span class="nc" id="L57">	}</span>
	
	@Override
	public void savestudentinfo(StudentInfoBo info) throws Exception {
<span class="nc" id="L61">		log.info(&quot;START&quot;);</span>
<span class="nc" id="L62">		Session session = null;</span>
<span class="nc" id="L63">		Transaction tr = null;</span>
<span class="nc" id="L64">		boolean flag = false;</span>
		try {
<span class="nc" id="L66">			session = getSessionFactory().openSession();</span>
<span class="nc" id="L67">			tr = session.beginTransaction();</span>
<span class="nc" id="L68">			Serializable serializable = (Serializable) session.save(info);</span>

<span class="nc" id="L70">			System.out.println(serializable);</span>
<span class="nc bnc" id="L71" title="All 2 branches missed.">			if (null != serializable) {</span>
<span class="nc" id="L72">				flag = true;</span>
			} else {
<span class="nc" id="L74">				flag = false;</span>
			}
<span class="nc" id="L76">			tr.commit();</span>
<span class="nc" id="L77">		} catch (Exception e) {</span>
<span class="nc" id="L78">			log.error(&quot;ERROR OCCURED&quot;);</span>
<span class="nc" id="L79">			log.error(e.getMessage(), e);</span>
<span class="nc" id="L80">			e.printStackTrace();</span>
<span class="nc bnc" id="L81" title="All 2 branches missed.">			if (tr != null) {</span>
<span class="nc" id="L82">				tr.rollback();</span>
			}
		} finally {
<span class="nc" id="L85">			log.info(&quot;END&quot;);</span>
<span class="nc bnc" id="L86" title="All 2 branches missed.">			if (session != null) {</span>
<span class="nc" id="L87">				session.close();</span>
			}
		}
<span class="nc" id="L90">	}</span>

	@Override
	public void savestudentedu(StudentEducationBo edu, Integer stu_id) throws Exception {
		// TODO Auto-generated method stub
<span class="nc" id="L95">		log.info(&quot;START&quot;);</span>

<span class="nc" id="L97">		String degree_type = edu.getDegree_type();</span>
<span class="nc" id="L98">		String[] degree_type1 = degree_type.split(&quot;,&quot;);</span>
<span class="nc" id="L99">		String gpa = edu.getDegree_gpa();</span>
<span class="nc" id="L100">		String[] gpa1 = gpa.split(&quot;,&quot;);</span>
<span class="nc" id="L101">		String major = edu.getMajor();</span>
<span class="nc" id="L102">		String[] major1 = major.split(&quot;,&quot;);</span>
<span class="nc" id="L103">		String uni = edu.getUniversity();</span>
<span class="nc" id="L104">		String[] uni1 = uni.split(&quot;,&quot;);</span>
<span class="nc" id="L105">		String uni_loc = edu.getUniversity_location();</span>
<span class="nc" id="L106">		String[] uni_loc1 = uni_loc.split(&quot;,&quot;);</span>

<span class="nc bnc" id="L108" title="All 2 branches missed.">		for (int i = 0; i &lt; degree_type1.length; i++) {</span>
<span class="nc" id="L109">			Session session = null;</span>
<span class="nc" id="L110">			Transaction tr = null;</span>
			try {
<span class="nc" id="L112">				session = getSessionFactory().openSession();</span>
<span class="nc" id="L113">				tr = session.beginTransaction();</span>
<span class="nc" id="L114">				edu.setDegree_type(degree_type1[i]);</span>
<span class="nc" id="L115">				edu.setDegree_gpa(gpa1[i]);</span>
<span class="nc" id="L116">				edu.setMajor(major1[i]);</span>
<span class="nc" id="L117">				edu.setUniversity(uni1[i]);</span>
<span class="nc" id="L118">				edu.setUniversity_location(uni_loc1[i]);</span>
<span class="nc" id="L119">				edu.setStudent_id(stu_id);</span>

<span class="nc" id="L121">				StudentEducationBo savedEdu = (StudentEducationBo) session.save(edu);</span>
<span class="nc" id="L122">				log.info(&quot;Saved student education record with ID: &quot; + savedEdu.getStu_edu_id());</span>
<span class="nc" id="L123">				tr.commit();</span>
<span class="nc" id="L124">			} catch (Exception e) {</span>
<span class="nc" id="L125">				log.error(&quot;ERROR OCCURRED while saving education record&quot;, e);</span>
<span class="nc bnc" id="L126" title="All 2 branches missed.">				if (tr != null) {</span>
<span class="nc" id="L127">					tr.rollback();</span>
				}
<span class="nc" id="L129">				throw e;</span>
			} finally {
<span class="nc" id="L131">				log.info(&quot;END&quot;);</span>
<span class="nc bnc" id="L132" title="All 2 branches missed.">				if (session != null) {</span>
<span class="nc" id="L133">					session.close();</span>
				}
			}
		}
<span class="nc" id="L137">	}</span>

	@Override
	public void savestucertificate(StudentCertificateBo certificatebo, Integer stu_id) throws Exception {
		// TODO Auto-generated method stub
<span class="nc" id="L142">		String title = certificatebo.getCertificate_title();</span>
<span class="nc" id="L143">		String[] title1 = title.split(&quot;,&quot;);</span>
<span class="nc" id="L144">		String body = certificatebo.getCertificate_body();</span>
<span class="nc" id="L145">		String[] body1 = body.split(&quot;,&quot;);</span>

<span class="nc" id="L147">		String student_id = stu_id.toString();</span>
<span class="nc bnc" id="L148" title="All 2 branches missed.">		for (int i = 0; i &lt; title1.length; i++) {</span>
<span class="nc" id="L149">			Session session = null;</span>
<span class="nc" id="L150">			Transaction tr = null;</span>
			try {
<span class="nc" id="L152">				session = getSessionFactory().openSession();</span>
<span class="nc" id="L153">				tr = session.beginTransaction();</span>
<span class="nc" id="L154">				certificatebo.setCertificate_title(title1[i]);</span>
<span class="nc" id="L155">				certificatebo.setCertificate_body(body1[i]);</span>
<span class="nc" id="L156">				certificatebo.setStudent_id(student_id);</span>

<span class="nc" id="L158">				StudentCertificateBo savedCert = (StudentCertificateBo) session.save(certificatebo);</span>
<span class="nc" id="L159">				log.info(&quot;Saved student certificate record with ID: &quot; + savedCert.getCertificate_id());</span>
<span class="nc" id="L160">				tr.commit();</span>
<span class="nc" id="L161">			} catch (Exception e) {</span>
<span class="nc" id="L162">				log.error(&quot;ERROR OCCURRED while saving certificate&quot;, e);</span>
<span class="nc bnc" id="L163" title="All 2 branches missed.">				if (tr != null) {</span>
<span class="nc" id="L164">					tr.rollback();</span>
				}
<span class="nc" id="L166">				throw e;</span>
			} finally {
<span class="nc" id="L168">				log.info(&quot;END&quot;);</span>
<span class="nc bnc" id="L169" title="All 2 branches missed.">				if (session != null) {</span>
<span class="nc" id="L170">					session.close();</span>
				}
			}
		}
<span class="nc" id="L174">	}</span>

	@Override
	public void saveworkexp(StudentWorkBo work, Integer stu_id) throws Exception {
		// TODO Auto-generated method stub
<span class="nc" id="L179">		String company = work.getCompany();</span>
<span class="nc" id="L180">		String[] company1 = company.split(&quot;,&quot;);</span>
<span class="nc" id="L181">		String company_loc = work.getCompany_location();</span>
<span class="nc" id="L182">		String[] company_loc1 = company_loc.split(&quot;,&quot;);</span>
<span class="nc" id="L183">		String position = work.getCompany_location();</span>
<span class="nc" id="L184">		String[] position1 = position.split(&quot;,&quot;);</span>
<span class="nc" id="L185">		String start_date = work.getStart_date();</span>
<span class="nc" id="L186">		String[] start_date1 = start_date.split(&quot;,&quot;);</span>

<span class="nc bnc" id="L188" title="All 2 branches missed.">		for (int i = 0; i &lt; company1.length; i++) {</span>
<span class="nc" id="L189">			Session session = null;</span>
<span class="nc" id="L190">			Transaction tr = null;</span>
			try {
<span class="nc" id="L192">				session = getSessionFactory().openSession();</span>
<span class="nc" id="L193">				tr = session.beginTransaction();</span>
<span class="nc" id="L194">				work.setCompany(company1[i]);</span>
<span class="nc" id="L195">				work.setCompany_location(company_loc1[i]);</span>
<span class="nc" id="L196">				work.setPosition(position1[i]);</span>
<span class="nc" id="L197">				work.setStart_date(start_date1[i]);</span>
<span class="nc" id="L198">				work.setStudent_id(stu_id);</span>

<span class="nc" id="L200">				StudentWorkBo savedWork = (StudentWorkBo) session.save(work);</span>
<span class="nc" id="L201">				log.info(&quot;Saved student work record with ID: &quot; + savedWork.getStu_work_id());</span>
<span class="nc" id="L202">				tr.commit();</span>
<span class="nc" id="L203">			} catch (Exception e) {</span>
<span class="nc" id="L204">				log.error(&quot;ERROR OCCURRED while saving work experience&quot;, e);</span>
<span class="nc bnc" id="L205" title="All 2 branches missed.">				if (tr != null) {</span>
<span class="nc" id="L206">					tr.rollback();</span>
				}
<span class="nc" id="L208">				throw e;</span>
			} finally {
<span class="nc" id="L210">				log.info(&quot;END&quot;);</span>
<span class="nc bnc" id="L211" title="All 2 branches missed.">				if (session != null) {</span>
<span class="nc" id="L212">					session.close();</span>
				}
			}
		}
<span class="nc" id="L216">	}</span>
	
	@Override
	public StudentLoginBo getStudentList(String username, String password) {
		try {
<span class="nc" id="L221">			String jpql = &quot;FROM StudentLoginBo WHERE username = :username AND pwd = :password&quot;;</span>
<span class="nc" id="L222">			TypedQuery&lt;StudentLoginBo&gt; query = entityManager.createQuery(jpql, StudentLoginBo.class)</span>
<span class="nc" id="L223">				.setParameter(&quot;username&quot;, username)</span>
<span class="nc" id="L224">				.setParameter(&quot;password&quot;, password);</span>
<span class="nc" id="L225">			return query.getSingleResult();</span>
<span class="nc" id="L226">		} catch (NoResultException e) {</span>
<span class="nc" id="L227">			return null;</span>
<span class="nc" id="L228">		} catch (Exception e) {</span>
<span class="nc" id="L229">			log.error(&quot;Error retrieving student login: {}&quot;, e.getMessage(), e);</span>
<span class="nc" id="L230">			throw new DatabaseException(&quot;Failed to retrieve student login&quot;, e);</span>
		}
	}
	
	@Override
	public List&lt;StudentInfoBo&gt; getstudentinternshipwise()
			throws Exception {
		// TODO Auto-generated method stub
		// TODO Auto-generated method stub
<span class="nc" id="L239">		Session session = null;</span>
<span class="nc" id="L240">		List&lt;StudentInternshipBo&gt; list = null;</span>
<span class="nc" id="L241">		List&lt;StudentInfoBo&gt; list1=null;</span>
		try{
<span class="nc" id="L243">			session = getSessionFactory().openSession();</span>
<span class="nc" id="L244">			Query query = null;</span>
<span class="nc" id="L245">			String sql = &quot;from  StudentInternshipBo&quot;;</span>
			
<span class="nc" id="L247">			query = session.createQuery(sql);</span>
		
<span class="nc" id="L249">			list = query.list();</span>
<span class="nc" id="L250">			int student_id= 0;</span>
<span class="nc" id="L251">			String s = &quot;&quot;;</span>
<span class="nc bnc" id="L252" title="All 2 branches missed.">			for(int z=0;z&lt;list.size();z++)</span>
			{
				// list=(List&lt;Student_Job_mapping&gt;) list.get(z);
<span class="nc" id="L255">				s = s + &quot;'&quot;+list.get(z).getStudent_id()+&quot;', &quot;;</span>
//				student_id=list.get(z).getStudent_id();
			}
<span class="nc" id="L258">			s = s.substring(0, s.length()-2);</span>
<span class="nc" id="L259">			Query query1=session.createQuery(&quot;From StudentInfoBo where student_id IN (&quot;+s+&quot;)&quot;);</span>
<span class="nc" id="L260">			list1=query1.list();</span>
<span class="nc" id="L261">			return list1;</span>
<span class="nc" id="L262">		}catch(Exception e){</span>
<span class="nc" id="L263">			log.error(&quot;ERROR OCCURED&quot;);</span>
<span class="nc" id="L264">			log.error(e.getMessage(), e);</span>
<span class="nc" id="L265">			e.printStackTrace();</span>
		}
		finally{
<span class="nc" id="L268">			log.info(&quot;END&quot;);</span>
<span class="nc" id="L269">			session.close();</span>
		}
<span class="nc" id="L271">		return list1;</span>
	}

	@Override
	public List&lt;StudentGpaBo&gt; getstudentavggpa() throws Exception {
		// TODO Auto-generated method stub
<span class="nc" id="L277">		Session session = null;</span>
<span class="nc" id="L278">		List&lt;StudentGpaBo&gt; info=null;</span>
		try{
<span class="nc" id="L280">			session = getSessionFactory().openSession();</span>
<span class="nc" id="L281">			Query query= session.createQuery(&quot;select e.student_id as student_id,i.fname as fname,i.lname as lname,e.degree_gpa as degree_gpa,i.country as country,e.degree_type as degree_type from  StudentEducationBo e,StudentInfoBo i where e.student_id=i.student_id &quot;).setResultTransformer(Transformers.aliasToBean(StudentGpaBo.class));</span>

			
			
		
<span class="nc" id="L286">			info = query.list();</span>
<span class="nc" id="L287">		}catch(Exception e){</span>
<span class="nc" id="L288">			e.printStackTrace();</span>
		}
		finally{
<span class="nc" id="L291">			log.info(&quot;END&quot;);</span>
<span class="nc" id="L292">			session.close();</span>
		}
		
		
		
<span class="nc" id="L297">		return info;	}</span>

	@Override
	public List&lt;StudentGpaBo&gt; search_gpa(ReportBo r) throws Exception {
		// TODO Auto-generated method stub
<span class="nc" id="L302">		Session session = null;</span>
<span class="nc" id="L303">		List&lt;StudentGpaBo&gt; info=null;</span>
		try{
<span class="nc" id="L305">			session = getSessionFactory().openSession();</span>
<span class="nc" id="L306">			Query query= null;</span>
<span class="nc" id="L307">			String sql =&quot; select e.student_id as student_id,i.fname as fname,i.lname as lname,e.degree_gpa as degree_gpa,i.country as country,e.degree_type as degree_type from  StudentEducationBo e,StudentInfoBo i where e.student_id=i.student_id&quot;;</span>
<span class="nc" id="L308">			System.out.println(r);</span>
<span class="nc bnc" id="L309" title="All 10 branches missed.">			if(!&quot;&quot;.equalsIgnoreCase(r.getYear()) || !&quot;&quot;.equalsIgnoreCase(r.getCountry())||!&quot;&quot;.equalsIgnoreCase(r.getUniversity()) || !&quot;&quot;.equalsIgnoreCase(r.getUniversity_location())||!&quot;&quot;.equalsIgnoreCase(r.getDegree_type())){</span>
<span class="nc" id="L310">				sql = sql + &quot; and &quot;;</span>
			}
<span class="nc bnc" id="L312" title="All 4 branches missed.">			if(null != r.getYear() &amp;&amp; !&quot;&quot;.equalsIgnoreCase(r.getYear())){</span>
<span class="nc" id="L313">				sql = sql + &quot;i.year = '&quot;+ r.getYear().trim() +&quot;' and &quot; ;</span>
			}
			
<span class="nc bnc" id="L316" title="All 4 branches missed.">			if(null != r.getCountry() &amp;&amp; !&quot;&quot;.equalsIgnoreCase(r.getCountry())){</span>
<span class="nc" id="L317">				sql = sql + &quot;i.country = '&quot;+r.getCountry() +&quot;' and &quot;;</span>
			}
<span class="nc bnc" id="L319" title="All 4 branches missed.">			if(null != r.getUniversity() &amp;&amp; !&quot;&quot;.equalsIgnoreCase(r.getUniversity())){</span>
<span class="nc" id="L320">				sql = sql + &quot;e.university = '&quot;+r.getUniversity() +&quot;' and &quot;;</span>
			}
<span class="nc bnc" id="L322" title="All 4 branches missed.">			if(null != r.getUniversity_location() &amp;&amp; !&quot;&quot;.equalsIgnoreCase(r.getUniversity_location())){</span>
<span class="nc" id="L323">				sql = sql + &quot;e.university_location = '&quot;+r.getUniversity_location() +&quot;' and &quot;;</span>
			}
<span class="nc bnc" id="L325" title="All 4 branches missed.">			if(null != r.getDegree_type() &amp;&amp; !&quot;&quot;.equalsIgnoreCase(r.getDegree_type())){</span>
<span class="nc" id="L326">				sql = sql + &quot;e.degree_type = '&quot;+r.getDegree_type() +&quot;' and &quot;;</span>
			}
<span class="nc bnc" id="L328" title="All 10 branches missed.">			if(!&quot;&quot;.equalsIgnoreCase(r.getYear()) || !&quot;&quot;.equalsIgnoreCase(r.getCountry())||  !&quot;&quot;.equalsIgnoreCase(r.getUniversity()) ||  !&quot;&quot;.equalsIgnoreCase(r.getUniversity_location()) ||  !&quot;&quot;.equalsIgnoreCase(r.getDegree_type())){</span>
<span class="nc" id="L329">				sql = sql + &quot; 1=1 &quot;;</span>
			}
<span class="nc" id="L331">			System.out.println(&quot;Final sql ==&gt;&gt;&quot; + sql);</span>
<span class="nc" id="L332">			query = session.createQuery(sql).setResultTransformer(Transformers.aliasToBean(StudentGpaBo.class));</span>
			
			
		
<span class="nc" id="L336">			info = query.list();</span>
<span class="nc" id="L337">		}catch(Exception e){</span>
<span class="nc" id="L338">			e.printStackTrace();</span>
		}
		finally{
<span class="nc" id="L341">			log.info(&quot;END&quot;);</span>
<span class="nc" id="L342">			session.close();</span>
		}
		
		
		
<span class="nc" id="L347">		return info;</span>
	}
	
	@SuppressWarnings(&quot;unchecked&quot;)
	
	/**
	 * Gives the student info by the ID 
	 * @param Student Id
	 * @return List containing student information
	 */
	
	@Override
	public List&lt;StudentInfoBo&gt; getstudentlistfromid(int student_id) throws Exception {
<span class="nc" id="L360">		Session session = null;</span>
<span class="nc" id="L361">		List&lt;StudentInfoBo&gt; list1=null;</span>
		try{
<span class="nc" id="L363">			session = getSessionFactory().openSession();</span>
<span class="nc" id="L364">			Query query= session.createQuery(&quot;From StudentInfoBo where student_id=?&quot;);</span>
<span class="nc" id="L365">			query.setParameter(0, student_id);</span>
<span class="nc" id="L366">			System.out.println(query);</span>
<span class="nc" id="L367">			list1=query.list();</span>
<span class="nc" id="L368">		}catch(Exception e){</span>
<span class="nc" id="L369">			log.error(&quot;ERROR OCCURED&quot;);</span>
<span class="nc" id="L370">			log.error(e.getMessage(), e);</span>
<span class="nc" id="L371">			e.printStackTrace();</span>
		}
		finally{
<span class="nc" id="L374">			log.info(&quot;END&quot;);</span>
<span class="nc" id="L375">			session.close();</span>
		}
<span class="nc" id="L377">		return list1;	</span>
		}

	@Override
	public List&lt;StudentEducationBo&gt; getstudentedulistfromid(int student_id)
			throws Exception {
		// TODO Auto-generated method stub
<span class="nc" id="L384">		Session session = null;</span>
<span class="nc" id="L385">		List&lt;StudentEducationBo&gt; list1=null;</span>
		try{
<span class="nc" id="L387">			session = getSessionFactory().openSession();</span>
<span class="nc" id="L388">			Query query= session.createQuery(&quot;From StudentEducationBo where student_id=?&quot;);</span>
<span class="nc" id="L389">			query.setParameter(0, student_id);</span>
<span class="nc" id="L390">			System.out.println(query);</span>
<span class="nc" id="L391">			list1=query.list();</span>
<span class="nc" id="L392">		}catch(Exception e){</span>
<span class="nc" id="L393">			log.error(&quot;ERROR OCCURED&quot;);</span>
<span class="nc" id="L394">			log.error(e.getMessage(), e);</span>
<span class="nc" id="L395">			e.printStackTrace();</span>
		}
		finally{
<span class="nc" id="L398">			log.info(&quot;END&quot;);</span>
<span class="nc" id="L399">			session.close();</span>
		}
<span class="nc" id="L401">		return list1;	</span>
	}

	@Override
	public void updateeducationinfo(StudentEducationBo r) throws Exception {
		// TODO Auto-generated method stub
<span class="nc" id="L407">		Session session = null;</span>
<span class="nc" id="L408">		Transaction tr = null;</span>
		try{
<span class="nc" id="L410">			session = getSessionFactory().openSession();</span>
<span class="nc" id="L411">			tr = session.beginTransaction();</span>
<span class="nc" id="L412">			session.update(r);</span>
			
<span class="nc" id="L414">			tr.commit();</span>
			
<span class="nc" id="L416">		}catch(Exception e){</span>
<span class="nc" id="L417">			log.error(&quot;ERROR OCCURED&quot;);</span>
<span class="nc" id="L418">			log.error(e.getMessage(), e);</span>
<span class="nc" id="L419">			e.printStackTrace();</span>
			
			
		}
		finally{
<span class="nc" id="L424">			log.info(&quot;END&quot;);</span>
<span class="nc" id="L425">			session.close();</span>
		
	}
<span class="nc" id="L428">	}</span>

	@Override
	public List&lt;StudentCertificateBo&gt; getstudentcertilistfromid(String student_id)
			throws Exception {
		// TODO Auto-generated method stub
<span class="nc" id="L434">		Session session = null;</span>
<span class="nc" id="L435">		List&lt;StudentCertificateBo&gt; list1=null;</span>
		try{
<span class="nc" id="L437">			String student_id1=student_id+&quot;&quot;;</span>
<span class="nc" id="L438">			session = getSessionFactory().openSession();</span>
<span class="nc" id="L439">			Query query= session.createQuery(&quot;From StudentCertificateBo where student_id=?&quot;);</span>
<span class="nc" id="L440">			query.setParameter(0, student_id1);</span>
<span class="nc" id="L441">			System.out.println(query);</span>
<span class="nc" id="L442">			list1=query.list();</span>
<span class="nc" id="L443">		}catch(Exception e){</span>
<span class="nc" id="L444">			log.error(&quot;ERROR OCCURED&quot;);</span>
<span class="nc" id="L445">			log.error(e.getMessage(), e);</span>
<span class="nc" id="L446">			e.printStackTrace();</span>
		}
		finally{
<span class="nc" id="L449">			log.info(&quot;END&quot;);</span>
<span class="nc" id="L450">			session.close();</span>
		}
<span class="nc" id="L452">		return list1;	</span>
	}

	@Override
	public void updateCERTIcationinfo(StudentCertificateBo r) throws Exception {
		// TODO Auto-generated method stub
<span class="nc" id="L458">		Session session = null;</span>
<span class="nc" id="L459">		Transaction tr = null;</span>
		try{
<span class="nc" id="L461">			session = getSessionFactory().openSession();</span>
<span class="nc" id="L462">			tr = session.beginTransaction();</span>
<span class="nc" id="L463">			session.update(r);</span>
			
<span class="nc" id="L465">			tr.commit();</span>
			
<span class="nc" id="L467">		}catch(Exception e){</span>
<span class="nc" id="L468">			log.error(&quot;ERROR OCCURED&quot;);</span>
<span class="nc" id="L469">			log.error(e.getMessage(), e);</span>
<span class="nc" id="L470">			e.printStackTrace();</span>
			
			
		}
		finally{
<span class="nc" id="L475">			log.info(&quot;END&quot;);</span>
<span class="nc" id="L476">			session.close();</span>
		
	}
<span class="nc" id="L479">	}</span>
	
	@Override
	public List&lt;StudentInfoBo&gt; searchreport(ReportBo r) throws Exception {
<span class="nc" id="L483">		log.info(&quot;START&quot;);</span>
<span class="nc" id="L484">		Session session = null;</span>
<span class="nc" id="L485">		List&lt;StudentInfoBo&gt; info=null;</span>
		try{
<span class="nc" id="L487">			session = getSessionFactory().openSession();</span>
<span class="nc" id="L488">			Query query = null;</span>
<span class="nc" id="L489">			String sql = &quot;from StudentInfoBo&quot;;</span>
<span class="nc" id="L490">			System.out.println(r);</span>
<span class="nc bnc" id="L491" title="All 10 branches missed.">			if(!&quot;&quot;.equalsIgnoreCase(r.getYear()) || !&quot;&quot;.equalsIgnoreCase(r.getStudent_status()) || !&quot;&quot;.equalsIgnoreCase(r.getInternship_type()) || !&quot;&quot;.equalsIgnoreCase(r.getSemester()) || !&quot;&quot;.equalsIgnoreCase(r.getCountry())){</span>
<span class="nc" id="L492">				sql = sql + &quot; where &quot;;</span>
			}
<span class="nc bnc" id="L494" title="All 4 branches missed.">			if(null != r.getYear() &amp;&amp; !&quot;&quot;.equalsIgnoreCase(r.getYear())){</span>
<span class="nc" id="L495">				sql = sql + &quot;year = '&quot;+ r.getYear().trim() +&quot;' and &quot; ;</span>
			}
<span class="nc bnc" id="L497" title="All 4 branches missed.">			if(null != r.getStudent_status() &amp;&amp; !&quot;&quot;.equalsIgnoreCase(r.getStudent_status()))</span>
			{
<span class="nc" id="L499">				sql = sql + &quot;student_status like '%&quot;+ r.getStudent_status() +&quot;' and &quot;;</span>
			}
<span class="nc bnc" id="L501" title="All 4 branches missed.">			if(null != r.getInternship_type() &amp;&amp; !&quot;&quot;.equalsIgnoreCase(r.getInternship_type())){</span>
<span class="nc" id="L502">				sql = sql + &quot;internship_status = '&quot;+ r.getInternship_type()+&quot;' and &quot;;</span>
			}
<span class="nc bnc" id="L504" title="All 4 branches missed.">			if(null != r.getCountry() &amp;&amp; !&quot;&quot;.equalsIgnoreCase(r.getCountry())){</span>
<span class="nc" id="L505">				sql = sql + &quot;country = '&quot;+r.getCountry() +&quot;' and &quot;;</span>
			}
<span class="nc bnc" id="L507" title="All 4 branches missed.">			if(null != r.getSemester() &amp;&amp; !&quot;&quot;.equalsIgnoreCase(r.getSemester())){</span>
<span class="nc" id="L508">				sql = sql + &quot;semester = '&quot;+r.getSemester() +&quot;' and &quot;;</span>
			}
<span class="nc bnc" id="L510" title="All 8 branches missed.">			if(!&quot;&quot;.equalsIgnoreCase(r.getYear()) || !&quot;&quot;.equalsIgnoreCase(r.getStudent_status()) || !&quot;&quot;.equalsIgnoreCase(r.getInternship_type()) || !&quot;&quot;.equalsIgnoreCase(r.getCountry())){</span>
<span class="nc" id="L511">				sql = sql + &quot; 1=1 &quot;;</span>
			}
<span class="nc" id="L513">			System.out.println(&quot;Final sql ==&gt;&gt;&quot; + sql);</span>
<span class="nc" id="L514">			query = session.createQuery(sql);</span>
		
<span class="nc" id="L516">			info = query.list();</span>
<span class="nc" id="L517">		}catch(Exception e){</span>
<span class="nc" id="L518">			e.printStackTrace();</span>
		}
		finally{
<span class="nc" id="L521">			log.info(&quot;END&quot;);</span>
<span class="nc" id="L522">			session.close();</span>
		}
		
		
		
<span class="nc" id="L527">		return info;</span>
		
	}
	
	@Override
	public List&lt;StudentInfoBo&gt; searchinterntype_student(ReportBo r)
			throws Exception {
		// TODO Auto-generated method stub
<span class="nc" id="L535">		Session session = null;</span>
<span class="nc" id="L536">		List&lt;StudentInternshipBo&gt; list = null;</span>
<span class="nc" id="L537">		List&lt;StudentInfoBo&gt; list1=null;</span>
<span class="nc" id="L538">		Query query = null;</span>
		try{
<span class="nc" id="L540">			session = getSessionFactory().openSession();</span>
<span class="nc" id="L541">			String sql = &quot;from  StudentInternshipBo&quot;;</span>
<span class="nc bnc" id="L542" title="All 4 branches missed.">			if(null != r.getInternship_type() &amp;&amp; !&quot;&quot;.equalsIgnoreCase(r.getInternship_type())){</span>
<span class="nc" id="L543">				sql = sql + &quot; where &quot;;</span>
			}
<span class="nc bnc" id="L545" title="All 4 branches missed.">			if(null != r.getInternship_type() &amp;&amp; !&quot;&quot;.equalsIgnoreCase(r.getInternship_type())){</span>
<span class="nc" id="L546">				sql = sql + &quot;internship_id = '&quot;+r.getInternship_type() +&quot;' and &quot;;</span>
			}
<span class="nc bnc" id="L548" title="All 4 branches missed.">			if(null != r.getInternship_type() &amp;&amp; !&quot;&quot;.equalsIgnoreCase(r.getInternship_type())){</span>
<span class="nc" id="L549">				sql = sql + &quot; 1=1 &quot;;</span>
			}
<span class="nc" id="L551">			query = session.createQuery(sql);</span>
		
<span class="nc" id="L553">			list = query.list();</span>
<span class="nc" id="L554">			String s = &quot;&quot;;</span>
//			int student_id= 0;
<span class="nc bnc" id="L556" title="All 2 branches missed.">			for(int z=0;z&lt;list.size();z++)</span>
			{
				// list=(List&lt;Student_Job_mapping&gt;) list.get(z);
<span class="nc" id="L559">				s = s + &quot;'&quot;+list.get(z).getStudent_id()+&quot;', &quot;;</span>
//				student_id=list.get(z).getStudent_id();
			}
<span class="nc" id="L562">			s = s.substring(0, s.length()-2);</span>
<span class="nc" id="L563">			Query query1=session.createQuery(&quot;From StudentInfoBo where student_id IN (&quot;+s+&quot;)&quot;);</span>
<span class="nc" id="L564">			list1=query1.list();</span>
<span class="nc" id="L565">			return list1;</span>
<span class="nc" id="L566">		}catch(Exception e){</span>
<span class="nc" id="L567">			log.error(&quot;ERROR OCCURED&quot;);</span>
<span class="nc" id="L568">			log.error(e.getMessage(), e);</span>
<span class="nc" id="L569">			e.printStackTrace();</span>
		}
		finally{
<span class="nc" id="L572">			log.info(&quot;END&quot;);</span>
<span class="nc" id="L573">			session.close();</span>
		}
<span class="nc" id="L575">		return list1;	}</span>

	@Override
	public List&lt;StudentInfoBo&gt; getallstudentdata() throws Exception {
		// TODO Auto-generated method stub
<span class="nc" id="L580">		log.info(&quot;START&quot;);</span>
<span class="nc" id="L581">		Session session = null;</span>
<span class="nc" id="L582">		List&lt;StudentInfoBo&gt; lstboo = null;</span>
		try{
<span class="nc" id="L584">			session = getSessionFactory().openSession();</span>
<span class="nc" id="L585">			Query query= session.createQuery(&quot;from StudentInfoBo&quot;);</span>
<span class="nc" id="L586">			lstboo = query.list();</span>
			
			
<span class="nc" id="L589">		}catch(Exception e){</span>
<span class="nc" id="L590">			e.printStackTrace();</span>
		}
		finally{
<span class="nc" id="L593">			log.info(&quot;END&quot;);</span>
<span class="nc" id="L594">			session.close();</span>
		}
<span class="nc" id="L596">		return lstboo;	}</span>

	

	
	
	
	
	
	

	@Override
	public List&lt;ApprovalStudentBo&gt; getstudentapprovedlist() throws Exception {
		// TODO Auto-generated method stub
<span class="nc" id="L610">		Session session = null;</span>
<span class="nc" id="L611">		List&lt;ApprovalStudentBo&gt; info=null;</span>
		try{
<span class="nc" id="L613">			session = getSessionFactory().openSession();</span>
<span class="nc" id="L614">			Query query= session.createQuery(&quot;select s.student_id as student_id,j.job_id as job_id,s.lname as lname,s.fname as fname,js.job_position as job_position,js.company_id as company_id,c.company_name as company_name  from StudentInfoBo s,Student_Job_mapping j,JobBo js,CompanyBo c where s.student_id=j.student_id and j.flag='Y' and j.job_id=js.job_id and js.company_id=c.company_id group by s.student_id,j.job_id,s.lname,s.fname,js.job_position,js.company_id,c.company_name&quot;).setResultTransformer(Transformers.aliasToBean(ApprovalStudentBo.class));</span>
<span class="nc" id="L615">			info = query.list();</span>
<span class="nc" id="L616">		}catch(Exception e){</span>
<span class="nc" id="L617">			e.printStackTrace();</span>
		}
		finally{
<span class="nc" id="L620">			log.info(&quot;END&quot;);</span>
<span class="nc" id="L621">			session.close();</span>
		}
		
		
		
<span class="nc" id="L626">		return info;</span>
		}

	

	@Override
	public List&lt;StudentWorkBo&gt; getstudentworklistfromid(String student_id)
			throws Exception {
		// TODO Auto-generated method stub
<span class="nc" id="L635">		Session session = null;</span>
<span class="nc" id="L636">		List&lt;StudentWorkBo&gt; list1=null;</span>
		try{
			
<span class="nc" id="L639">			session = getSessionFactory().openSession();</span>
<span class="nc" id="L640">			Query query= session.createQuery(&quot;From StudentWorkBo where student_id=?&quot;);</span>
<span class="nc" id="L641">			query.setParameter(0, Integer.parseInt(student_id));</span>
<span class="nc" id="L642">			System.out.println(query);</span>
<span class="nc" id="L643">			list1=query.list();</span>
<span class="nc" id="L644">		}catch(Exception e){</span>
<span class="nc" id="L645">			log.error(&quot;ERROR OCCURED&quot;);</span>
<span class="nc" id="L646">			log.error(e.getMessage(), e);</span>
<span class="nc" id="L647">			e.printStackTrace();</span>
		}
		finally{
<span class="nc" id="L650">			log.info(&quot;END&quot;);</span>
<span class="nc" id="L651">			session.close();</span>
		}
<span class="nc" id="L653">		return list1;	</span>
		}

	@Override
	public void updateworkcationinfo(StudentWorkBo r) throws Exception {
		// TODO Auto-generated method stub
<span class="nc" id="L659">		Session session = null;</span>
<span class="nc" id="L660">		Transaction tr = null;</span>
		try{
<span class="nc" id="L662">			session = getSessionFactory().openSession();</span>
<span class="nc" id="L663">			tr = session.beginTransaction();</span>
<span class="nc" id="L664">			session.update(r);</span>
			
<span class="nc" id="L666">			tr.commit();</span>
			
<span class="nc" id="L668">		}catch(Exception e){</span>
<span class="nc" id="L669">			log.error(&quot;ERROR OCCURED&quot;);</span>
<span class="nc" id="L670">			log.error(e.getMessage(), e);</span>
<span class="nc" id="L671">			e.printStackTrace();</span>
			
			
		}
		finally{
<span class="nc" id="L676">			log.info(&quot;END&quot;);</span>
<span class="nc" id="L677">			session.close();</span>
		
	}
<span class="nc" id="L680">	}</span>




}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.12.202403310830</span></div></body></html>